<div class="auth-container">
  <div class="auth-card">
    <h2 class="title">{{ isLoginMode ? 'Iniciar Sesión' : 'Registrarse' }}</h2>
    <p class="subtitle">
      {{ isLoginMode ? 'Accede con tu nombre de usuario.' : 'Crea una cuenta nueva rápidamente.' }}
    </p>

    <form [formGroup]="authForm" (ngSubmit)="onSubmit()">
      <div class="input-group">
        <label for="nombre">
          {{ isLoginMode ? 'Nombre de usuario' : 'Elige un nombre de usuario' }}
        </label>

        <input type="text" id="nombre" formControlName="nombre" placeholder="Tu nombre" />

        @if (authForm.get('nombre')?.invalid && authForm.get('nombre')?.touched) {
        <div class="error-message">
          <span>El nombre de usuario es requerido.</span>
        </div>
        }
      </div>

      @if (!isLoginMode) {
      <div class="input-group">
        <label for="telefono">Teléfono (9 dígitos)</label>
        <input type="tel" id="telefono" formControlName="telefono" placeholder="Ej: 600123456" />

        @if (authForm.get('telefono')?.invalid && authForm.get('telefono')?.touched) {
        <div class="error-message">
          <span>Introduce un teléfono válido.</span>
        </div>
        }
      </div>

      <div class="input-group">
        <label for="email">Correo Electrónico</label>
        <input type="email" id="email" formControlName="email" placeholder="ejemplo@correo.com" />

        @if (authForm.get('email')?.invalid && authForm.get('email')?.touched) {
        <div class="error-message">
          <span>Introduce un correo válido.</span>
        </div>
        }
      </div>
      }

      <div class="input-group">
        <label for="password">Contraseña</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          placeholder="Mínimo 6 caracteres"
        />

        @if (authForm.get('password')?.invalid && authForm.get('password')?.touched) {
        <div class="error-message">
          <span>Mínimo 6 caracteres.</span>
        </div>
        }
      </div>

      @if (!isLoginMode) {
      <div class="input-group-checkbox">
        <input type="checkbox" id="terminos" formControlName="terminos" />

        <label for="terminos">
          Acepto los
          <a href="assets/docs/aviso-legal.pdf" target="_blank"> términos y condiciones </a>
        </label>

        @if (authForm.get('terminos')?.invalid && authForm.get('terminos')?.touched) {
        <div class="error-message">Debes aceptar los términos</div>
        }
      </div>
      } @if (errorMessage) {
      <div class="error-firebase">
        {{ errorMessage }}
      </div>
      }

      <button type="submit" [disabled]="authForm.invalid" class="auth-button">
        {{ isLoginMode ? 'Acceder' : 'Crear Cuenta' }}
      </button>
    </form>

    <p class="mode-link">
      @if (isLoginMode) { ¿No tienes cuenta?
      <a href="#" (click)="$event.preventDefault(); toggleMode()">Regístrate aquí.</a>
      } @else { ¿Ya tienes cuenta?
      <a href="#" (click)="$event.preventDefault(); toggleMode()">Inicia sesión.</a>
      }
    </p>
  </div>
</div>
