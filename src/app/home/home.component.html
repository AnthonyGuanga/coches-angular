<main class="home-container">
  <!-- Bienvenida -->
  <h1>Descubre tu próximo coche en nuestra web</h1>
  <p class="subtitle">
    Explora las mejores ofertas, encuentra tu modelo ideal y reserva tu vehículo de manera rápida y segura.
  </p>

  <!-- Carrusel -->
  <app-carousel [slides]="carouselSlides"></app-carousel>

  <!-- Tipos de coches -->
  <div class="grid-cars">
    <app-car-type-card
      *ngFor="let tipo of tiposCoche"
      [tipo]="tipo"
      [active]="categoriaSeleccionada === tipo.id"
      (selected)="filtrarPorTipo($event)">
    </app-car-type-card>
  </div>

  <!-- Anuncios Destacados -->
  <div class="category-header">
    <h2 class="section-title">
      Anuncios Destacados
      <span *ngIf="categoriaSeleccionada; else todos" class="highlight">
        (Mostrando: {{ categoriaSeleccionada }})
      </span>
      <ng-template #todos>
        <span class="subtitle">(coches desde 2023)</span>
      </ng-template>
    </h2>
  </div>

  <!-- Lista de coches destacados -->
  <div class="anuncios-grid" *ngIf="(coches$ | async) as coches; else noCoches">
    <div class="anuncio" *ngFor="let coche of coches">
      <div class="anuncio-imagen-wrapper">
        <img
          [src]="coche.fotoPrincipal || 'https://via.placeholder.com/300x200?text=Sin+Foto'"
          alt="{{ coche.marca }} {{ coche.modelo }}"
          class="anuncio-img"
        />
      </div>

      <div class="anuncio-content">
        <h3>
          {{ coche.marca }} <span style="color: #2563eb">{{ coche.modelo }}</span>
        </h3>
        <p class="anuncio-detalles">
          {{ coche.anio }} • {{ coche.combustible }} • {{ coche.cambio }}
        </p>
        <span class="anuncio-precio">
          {{ coche.precio | currency:'EUR':'symbol':'1.0-0' }}
        </span>
      </div>
    </div>
  </div>

  <!-- Mensaje si no hay coches -->
  <ng-template #noCoches>
    <div style="grid-column: 1 / -1; text-align: center; padding: 40px">
      <p style="font-size: 1.2rem; color: #64748b">
        No hay coches disponibles para <strong>{{ categoriaSeleccionada || 'esta categoría' }}</strong>
      </p>
      <button (click)="filtrarPorTipo(categoriaSeleccionada!)" class="btn-reset">
        Ver todos los coches
      </button>
    </div>
  </ng-template>
</main>