<main class="home-container">
  <h1>¡Bienvenido a Mi App!</h1>
  <app-carousel [slides]="bannerImages"></app-carousel>

  <section class="car-selector">
    <h1 class="title">Elige tu tipo de coche</h1>

    <div class="grid-cars">
      <div
        class="card"
        (click)="filtrarPorTipo('SUV')"
        [class.active]="categoriaSeleccionada === 'SUV'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <rect x="6" y="18" width="98" height="24" rx="5" />
              <rect x="22" y="6" width="46" height="20" rx="4" />
              <circle cx="30" cy="46" r="6" />
              <circle cx="86" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>SUV</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('monovolumen')"
        [class.active]="categoriaSeleccionada === 'monovolumen'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <rect x="6" y="18" width="100" height="22" rx="6" />
              <rect x="30" y="6" width="50" height="20" rx="6" />
              <circle cx="34" cy="46" r="5" />
              <circle cx="84" cy="46" r="5" />
            </g>
          </svg>
        </div>
        <p>monovolumen</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('familiar')"
        [class.active]="categoriaSeleccionada === 'familiar'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <rect x="8" y="20" width="86" height="20" rx="5" />
              <path d="M22 20 q12 -14 34 -14 q14 0 26 12 v6 h-60z" />
              <circle cx="32" cy="46" r="6" />
              <circle cx="76" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>familiar</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('hatchback')"
        [class.active]="categoriaSeleccionada === 'hatchback'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <path d="M10 34 q18 -18 46 -18 q16 0 28 12 q-2 6 -10 8 q-10 3 -20 3 q-16 0 -30 -5z" />
              <circle cx="36" cy="46" r="6" />
              <circle cx="84" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>hatchback</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('coupé')"
        [class.active]="categoriaSeleccionada === 'coupé'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <path d="M10 30 q18 -14 46 -14 q20 0 28 8 v6 h-70z" />
              <rect x="18" y="34" width="76" height="6" rx="3" />
              <circle cx="34" cy="46" r="6" />
              <circle cx="86" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>Coupé</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('furgoneta')"
        [class.active]="categoriaSeleccionada === 'furgoneta'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <rect x="6" y="14" width="92" height="30" rx="4" />
              <rect x="66" y="8" width="26" height="18" rx="2" />
              <circle cx="30" cy="46" r="6" />
              <circle cx="78" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>Furgoneta</p>
      </div>

      <div
        class="card"
        (click)="filtrarPorTipo('sedán')"
        [class.active]="categoriaSeleccionada === 'sedán'"
      >
        <div class="icon">
          <svg viewBox="0 0 120 60">
            <g fill="#222">
              <rect x="10" y="20" width="70" height="18" rx="6" />
              <path d="M18 20 q8 -10 30 -10 q18 0 22 8 v6 h-60z" />
              <circle cx="30" cy="46" r="6" />
              <circle cx="70" cy="46" r="6" />
            </g>
          </svg>
        </div>
        <p>Sedan</p>
      </div>
    </div>
  </section>
  <h2 style="margin-top: 30px; border-bottom: 2px solid #3b82f6; padding-bottom: 10px">
    Anuncios Destacados @if (categoriaSeleccionada) {
    <span style="color: #3b82f6; font-size: 0.8em"> (Mostrando: {{ categoriaSeleccionada }}) </span>
    } @else {
    <span style="color: #666; font-size: 0.8em"> (Todos) </span>
    }
  </h2>

  @if (coches$ | async; as coches) {

  <div class="anuncios-grid">
    @for (coche of coches; track coche.id) {
    <div
      class="anuncio"
      style="
        border: 1px solid #ccc;
        padding: 15px;
        margin: 10px;
        border-radius: 8px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        background-color: #f9f9f9;
      "
    >
      <h3>{{ coche.marca }} {{ coche.modelo }}</h3>

      <p style="font-weight: bold; color: #10b981">
        Precio: {{ coche.precio | currency : 'EUR' : 'symbol' : '1.0-0' }}
      </p>

      <p>
        <small style="color: #6b7280">ID: {{ coche.id }}</small>
      </p>
    </div>
    } @empty {
    <div style="padding: 20px; text-align: center; width: 100%">
      <p>
        No se encontraron anuncios de tipo <strong>{{ categoriaSeleccionada }}</strong
        >.
      </p>
      <button
        (click)="filtrarPorTipo(categoriaSeleccionada!)"
        style="padding: 5px 10px; cursor: pointer"
      >
        Quitar filtros
      </button>
    </div>
    }
  </div>

  }
</main>
