<main class="home-container">
  <!-- Bienvenida -->
  <h1>Encuentra el coche perfecto para ti</h1>
  <p class="subtitle">
    Explora nuestras ofertas exclusivas, compara modelos y reserva tu vehículo favorito en pocos
    clics.
  </p>

  <!-- Carrusel hola -->
  <app-carousel [slides]="carouselSlides"></app-carousel>

  <!-- Tipos de coches -->
  <div class="grid-cars">
    @for (tipo of tiposCoche; track tipo.id) {
    <app-car-type-card
      [tipo]="tipo"
      [active]="categoriaSeleccionada === tipo.id"
      (selected)="filtrarPorTipo($event)"
    >
    </app-car-type-card>
    }
  </div>

  <!-- Anuncios Destacados -->
  <div class="category-header">
    <h2 class="section-title">
      Anuncios Destacados @if (categoriaSeleccionada) {
      <span class="highlight"> (Mostrando: {{ categoriaSeleccionada }}) </span>
      } @else {
      <span class="subtitle">(coches más nuevos)</span>
      }
    </h2>
  </div>

  <!-- Lista de coches destacados -->
  @if ((coches$ | async); as coches) {
  <div class="anuncios-grid">
    @for (coche of coches; track coche.id) {
    <div class="anuncio" [routerLink]="['/coche-detalle', coche.id]" style="cursor: pointer">
      <div class="anuncio-imagen-wrapper">
        <img
          [src]="coche.fotoPrincipal || 'assets/proximamente.png'"
          alt="{{ coche.marca }} {{ coche.modelo }}"
          class="anuncio-img"
        />
      </div>

      <div class="anuncio-content">
        <h3>
          {{ coche.marca }} <span style="color: #2563eb">{{ coche.modelo }}</span>
        </h3>
        <p class="anuncio-detalles">
          {{ coche.anio }} • {{ coche.combustible }} • {{ coche.cambio }}
        </p>
        <span class="anuncio-precio">
          {{ coche.precio | currency : 'EUR' : 'symbol' : '1.0-0' }}
        </span>
      </div>
    </div>
    } @empty {
    <!-- Mensaje si no hay coches -->
    <div style="grid-column: 1 / -1; text-align: center; padding: 40px">
      <p style="font-size: 1.2rem; color: #64748b">
        No hay coches disponibles para
        <strong>{{ categoriaSeleccionada || 'esta categoría' }}</strong>
      </p>
      <button (click)="filtrarPorTipo(categoriaSeleccionada!)" class="btn-reset">
        Ver todos los coches
      </button>
    </div>
    }
  </div>
  }
</main>
